<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>관리자 페이지- 1:1 문의 </title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

<script src="https://code.jquery.com/jquery-3.6.1.min.js" 
	integrity="sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ=" 
		crossorigin="anonymous"></script>
<script> 

function search_board()
{

   var serData = $('#search_board').serialize();
   
   $.ajax({
      url: '/admin/search_qna',
      method: 'post',
      data: serData,
      dataType: 'json',   
      cache: false,     
      success: function(res){

       	var cnt = res.length;
         for(var i=0; i<cnt; i++)
         {
      	   $('#found tbody').html( '<tr>'
      	   							+ '<td>'+res[i].qnum+'</td>'
      	   							+'<td>'+
      	   								'<a href = "/admin/detail_q/'+ res[i].qnum + '">'  + res[i].title + '</a>'
      	   							+'</td>'
      	   							+'<td>'+res[i].author+'</td>'
      	   							+'<td>'+res[i].hit+'</td>'
      	   							+'<td>'+res[i].qdate+'</td>'
      	   							+ '</tr>'
      	   )            	   
         
         }
      }, 
      error: function(xhr,status,err){
         alert('에러'+err);
      }
   })

   return false;
}
	

</script>      			
</head>
<body>
<div>
    <div th:replace="fragments/managernav :: header"></div>
</div>
<div class="container">
	<h3 style="color:grey; text-align:center;"> 고객 관리</h3> 
	<h5 style="text-align:center;">1:1 문의</h5>
	
	<div style="float:left">
	<a class="btn btn-secondary" href="/admin/add">관리자 글쓰기</a>
	</div>

	<form id="search_board" onsubmit='return search_board();'>
	<div style= "float: right"> 
		<input type="text" id='input' name='input' placeholder='제목을 입력하세요'> 
		<button type="submit">검색</button>
	</div>
	</form>
	
	<table class="table table-hover" id="found">
		<thead>
		<tr>
			<th>번호</th>
			<th>제목</th>
			<th>작성자</th>
			<th>조회수</th>
			<th>등록일</th>
		</tr>
		</thead>
		<tbody>
		<tr th:each="board, iStat: ${list}">
		    <td th:text="${iStat.index+1}"> </td>
			<td>
				<a th:href= "|/admin/detailByQnum/${board.qnum}|" style="text-decoration:none">	
				[[${board.title}]]
				</a>
			</td>
			<td>[[${board.author}]]</td>
			<td>[[${board.hit}]]</td>
			<td>[[${board.qdate}]]</td>	
			
		</tr>
		</tbody>
	</table>
</div>
<div class ="text-center"> 
	<span th:each="page, i: ${list}">
	<a th:href = "|/qaList/${i}/10|"> [[${i.index+1}]]</a>
	</span>
</div>
</body>
</html>